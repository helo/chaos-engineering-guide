<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Explore the Application :: OpenShift Chaos Engineering Workshop</title>
    <link rel="canonical" href="https://redhat-scholars.github.io/course-template/chaos-engineering/5.0/chaos-explore.html">
    <link rel="prev" href="chaos-environment.html">
    <link rel="next" href="chaos-metrics.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img
          src="../../_/img/header_logo.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" href="https://redhat-scholars.github.io/course-template">OpenShift Chaos Engineering Workshop</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Books</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">CheatSheets</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">CheatSheet A</a>
            <a class="navbar-item" href="#">CheatSheet B</a>
            <a class="navbar-item" href="#">CheatSheet C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Upcoming Events</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Event A</a>
            <a class="navbar-item" href="#">Event B</a>
            <a class="navbar-item" href="#">Event C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Tutorial A</a>
            <a class="navbar-item" href="#">Tutorial B</a>
            <a class="navbar-item" href="#">Tutorial C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="chaos-engineering" data-version="5.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html" class=" query-params-link">OpenShift Chaos Engineering Workshop</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="chaos-design.html">1. Design Chaos experiments</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="chaos-environment.html">2. Get your Chaos environment</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="chaos-explore.html">3. Explore the Application</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="chaos-metrics.html">4. Define and monitor Chaos metrics</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="chaos-latency.html">5. Chaos Experiment 1: Network latency</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="chaos-error.html">6. Chaos Experiment 2: Unavailable Service</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="faq.html">7. FAQ</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">OpenShift Chaos Engineering Workshop</span>
    <span class="version">5.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">OpenShift Chaos Engineering Workshop</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">5.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">OpenShift Chaos Engineering Workshop</a></li>
    <li><a href="chaos-explore.html">3. Explore the Application</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/redhat-scholars/chaos-engineering-guide/edit/5.0/documentation/modules/ROOT/pages/chaos-explore.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Explore the Application</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><em>10 MINUTE PRACTICE</em></p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/explore-discover.png" alt="explore-discover" width="800">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_is_openshift_service_mesh"><a class="anchor" href="#_what_is_openshift_service_mesh"></a>What is OpenShift Service Mesh?</h2>
<div class="sectionbody">
<div class="sidebarblock">
<div class="content">
<div class="title">OpenShift Service Mesh</div>
<div class="paragraph">
<p><strong>OpenShift Service Mesh</strong> is also a service available on top of OpenShift.</p>
</div>
<div class="paragraph">
<p>As applications evolve into collections of decentralized services, managing communications and security between those services becomes more difficult.</p>
</div>
<div class="paragraph">
<p><strong>Red Hat OpenShift Service Mesh</strong> is a service that provides behavioral insight and operational control over the Service Mesh, providing a uniform way to connect, secure, and monitor microservice applications.</p>
</div>
<div class="paragraph">
<p>What’s in it?</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset1_service-mesh"></a>Service Mesh</p>
</li>
<li>
<p><a id="tabset1_observability"></a>Observability</p>
</li>
<li>
<p><a id="tabset1_monitoring"></a>Monitoring</p>
</li>
<li>
<p><a id="tabset1_tracing"></a>Tracing</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset1_service-mesh">
<div class="imageblock">
<div class="content">
<img src="_images/istio-logo.png" alt="Istio" width="200">
</div>
</div>
<div class="paragraph">
<p><strong>Istio</strong> is an open-source project for integrating and managing traffic flow across services. It works in concert with an underlying cluster manager (like Kubernetes). Centralized components, sidecar proxies, and node agents work together to create the data and control planes over a distributed application.</p>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_observability">
<div class="imageblock">
<div class="content">
<img src="_images/kiali-logo.png" alt="Kiali" width="200">
</div>
</div>
<div class="paragraph">
<p>Observability helps users see communication pathways between services, how they’re being managed, and how traffic is flowing in near-real time for easier management and troubleshooting.</p>
</div>
<div class="paragraph">
<p>OpenShift Service Mesh uses <strong>Kiali</strong>, an open source project, to view configuration, monitor traffic, and analyze traces.</p>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_monitoring">
<div class="paragraph">
<p><span class="image"><img src="_images/grafana-logo.png" alt="Grafana" width="200"></span>
<span class="image"><img src="_images/prometheus-logo.png" alt="Prometheus" width="200"></span></p>
</div>
<div class="paragraph">
<p>OpenShift Service Mesh uses <strong>Grafana</strong> and <strong>Prometheus</strong> to provide out of the box metrics and monitoring for all services.</p>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_tracing">
<div class="paragraph">
<p><span class="image"><img src="_images/jaeger-logo.png" alt="Istio" width="200"></span>
<span class="image"><img src="_images/elastic-search-logo-color-horizontal.png" alt="Elastic Search" width="200"></span></p>
</div>
<div class="paragraph">
<p>Tracing allows you to track a single request as it makes its way between different services - or even inside a service - providing insight into the entire request process from start to finish.
OpenShift Service Mesh uses <strong>Jaeger</strong>, an open, distributed tracing system and <strong>Elasticsearch</strong>, a distributed, free and open search and analytics engine to capture distributed traces providing a “per request” view  for isolating bottlenecks between services.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_observability_with_kiali"><a class="anchor" href="#_observability_with_kiali"></a>Observability with Kiali</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Kiali</strong> provides an interactive graph view of your namespace in real time, being able to display the interactions at several levels (applications, versions, workloads), with contextual information and charts on the selected graph node or edge.</p>
</div>
<div class="paragraph">
<p><code><strong>Click on the 'Kiali' button below</strong></code></p>
</div>
<div class="imageblock params-link">
<div class="content">
<a class="image" href="https://kiali-istio-system.%APPS_HOSTNAME_SUFFIX%" target="_blank" rel="noopener"><img src="_images/kiali-button.png" alt="Kiali - Button" width="300"></a>
</div>
</div>
<div class="paragraph">
<p>Then, <code><strong>log in with OpenShift as user%USER_ID%/%OPENSHIFT_PASSWORD%'</strong></code></p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/kiali-login.png" alt="Kiali- Log In" width="300">
</div>
</div>
<div class="paragraph">
<p>Select the  <strong>'Graph' view</strong>, from the side menu bar and <code><strong>enter the following configuration</strong></code>:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/kiali-graph.png" alt="Kiali- Graph" width="900">
</div>
</div>
<div class="paragraph">
<p>The outcome is a graph with all the services, connected by the requests going through them.
You can see how the services interact with each other.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Graph Settings</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Namespace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>chaos-engineering%USER_ID%</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type Graph</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Versioned app graph</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>'Response Time'</strong> checked</p>
<p class="tableblock"><strong>'Traffic Animation'</strong> checked</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hide&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>service*=svc.cluster.local</strong></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_understand_the_application"><a class="anchor" href="#_understand_the_application"></a>Understand the Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before continuing we will describe the application used in this workshop.</p>
</div>
<div class="paragraph">
<p>This demo application deploys several services into 1 namespace.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>'chaos-engineering%USER_ID%'</strong> namespace</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Inside the <strong>'chaos-engineering%USER_ID%' namespace</strong> we see 3 parts</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Travel-portal</p>
</li>
<li>
<p>Travel-agency</p>
</li>
<li>
<p>Travel-control</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/Application-travel-description.png" alt="Application Travel Description- Graph" width="900">
</div>
</div>
<div class="paragraph">
<p>The Travels Demo application simulates two business domains:</p>
</div>
<div class="sect2">
<h3 id="_travel_portal"><a class="anchor" href="#_travel_portal"></a>Travel Portal</h3>
<div class="paragraph">
<p>In a first part called <strong>travel-portal</strong> there will be deployed several travel shops, where users can search for and book flights, hotels, cars or insurance.</p>
</div>
<div class="paragraph">
<p>The shop applications can behave differently based on request characteristics like channel (web or mobile) or user (new or existing).</p>
</div>
<div class="paragraph">
<p>These workloads may generate different types of traffic to imitate different real scenarios.</p>
</div>
<div class="paragraph">
<p>All the portals consume a service called travels.</p>
</div>
</div>
<div class="sect2">
<h3 id="_travel_agency"><a class="anchor" href="#_travel_agency"></a>Travel Agency</h3>
<div class="paragraph">
<p>A second part called <strong>travel-agency</strong> will host a set of services created to provide quotes for travel.</p>
</div>
<div class="paragraph">
<p>A main travels service will be the business entry point for the travel agency. It receives a destination city and a user as parameters and it calculates all elements that compose a travel budget: airfare, lodging, car reservation and travel insurance.</p>
</div>
<div class="paragraph">
<p>Each service can provide an independent quote and the travels service must then aggregate them into a single response.</p>
</div>
<div class="paragraph">
<p>Additionally, some users, like registered users, can have access to special discounts, managed as well by an external service.</p>
</div>
<div class="paragraph">
<p>Service relations between services of the applications can be described in the following diagram:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/travels-demo-design.png" alt="travel-demo-design - Travel demo Project deployed by Argo CD" width="800">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_travel_portal_and_travel_agency_flow"><a class="anchor" href="#_travel_portal_and_travel_agency_flow"></a>Travel Portal and Travel Agency flow</h3>
<div class="paragraph">
<p>A typical flow consists of the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A portal queries the travels service for available destinations.</p>
</li>
<li>
<p>Travels service queries the available hotels and returns to the portal shop.</p>
</li>
<li>
<p>A user selects a destination and a type of travel, which may include a flight and/or a car, hotel and insurance.</p>
</li>
<li>
<p>Cars, Hotels and Flights may have available discounts depending on user type.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_travel_control"><a class="anchor" href="#_travel_control"></a>Travel Control</h3>
<div class="paragraph">
<p>The <strong>travel-control</strong>  runs a <strong>business dashboard</strong> with two key features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Allow setting changes for every travel shop simulator (traffic ratio, device, user and type of travel).</p>
</li>
<li>
<p>Provide a <strong>business</strong> view of the total requests generated from the <strong>travel-control</strong> service to the <strong>travel-agency</strong> services, organized by business criteria as grouped per shop, per type of traffic and per city.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_access_the_application"><a class="anchor" href="#_access_the_application"></a>Access the Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To access to the dashboard (UI) of the application, we will need to create a specific Istio Ingress component.</p>
</div>
<div class="paragraph">
<p>In the <a href="https://kiali-istio-system.%APPS_HOSTNAME_SUFFIX%" class="params-link" target="_blank" rel="noopener">Kiali Console</a>, from the <strong>'Services' view</strong>, <code><strong>click on the 'control' service &gt; 'Actions' &gt; 'Request Routing'</strong></code></p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/kiali-control-request-routing.png" alt="Kiali - Control Request Routing" width="800">
</div>
</div>
<div class="paragraph">
<p><code><strong>Click on 'Add Rule' button</strong></code> to redirect all the ingress traffic to the 'control' service*`:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/kiali-control-add-rule.png" alt="Kiali - Control Add Rule" width="500">
</div>
</div>
<div class="paragraph">
<p>Then <code><strong>click on 'Show Advanced Options' and entering the following information</strong></code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Gateways Settings</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add Gateway</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Enabled</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gateway Hosts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>control-chaos-engineering%USER_ID%.%APPS_HOSTNAME_SUFFIX%</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="_images/kiali-control-create-ingress.png" alt="Kiali - Control Create Ingress" width="500">
</div>
</div>
<div class="paragraph">
<p>Finally, <code><strong>click on the 'Create' button</strong></code>. You can now access the Travel Control Dashboard using the following URL, <a href="http://control-chaos-engineering%USER_ID%.%APPS_HOSTNAME_SUFFIX%" class="bare params-link" target="_blank" rel="noopener">http://control-chaos-engineering%USER_ID%.%APPS_HOSTNAME_SUFFIX%</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/travels-dashboard.png" alt="travels-dashboard - Business Dashboard" width="800">
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="chaos-environment.html" class="query-params-link">2. Get your Chaos environment</a></span>
  <span class="next"><a href="chaos-metrics.html" class="query-params-link">4. Define and monitor Chaos metrics</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../../_/js/vendor/clipboard.js"></script>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
